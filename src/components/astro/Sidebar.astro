---
// Product of Launch Maniac llc, Las Vegas, Nevada - (725) 444-8200 support@launchmaniac.com
// Static sidebar component - category navigation rendered at build time

import { CATEGORIES } from '../../lib/constants';

interface Props {
  activeCategory?: string;
  debtValue?: number;
}

const { activeCategory = 'ALL', debtValue = 0 } = Astro.props;

const formattedDebt = debtValue > 0
  ? new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(debtValue)
  : '';

// Icon SVG paths for each category (inline to avoid JS)
const iconPaths: Record<string, string> = {
  'ALL': 'M4 4h7v7H4V4zm9 0h7v7h-7V4zm-9 9h7v7H4v-7zm9 0h7v7h-7v-7z',
  'TREASURY': 'M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83',
  'FEDERAL RESERVE': 'M8 21V5a2 2 0 012-2h4a2 2 0 012 2v16M3 21h18M12 7v2m0 4v2',
  'ENERGY': 'M13 2L3 14h9l-1 8 10-12h-9l1-8z',
  'EUROZONE': 'M12 2a10 10 0 100 20 10 10 0 000-20zm-2 5h4M8 12h8m-6 5h4',
  'ASIA_PACIFIC': 'M12 21a9 9 0 100-18 9 9 0 000 18zm0-18v18M3 12h18',
  'GLOBAL_MACRO': 'M12 21a9 9 0 100-18 9 9 0 000 18zm-3-9h6m-3-3v6',
  'CRYPTO': 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z',
  'STATE_DEPT': 'M3 21V3h12l6 6v12a2 2 0 01-2 2H5a2 2 0 01-2-2z',
  'MILITARY': 'M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z',
  'UK': 'M11.1 1.3a.9.9 0 011.8 0l2.4 5.6 6 .5a.9.9 0 01.5 1.6l-4.6 4 1.4 5.8a.9.9 0 01-1.4 1l-5.2-3.2-5.2 3.2a.9.9 0 01-1.4-1l1.4-5.8-4.6-4a.9.9 0 01.5-1.6l6-.5 2.4-5.6z',
  'RESEARCH': 'M9 3L5 21M15 3l4 18M5 12h14M4 19h16',
  'MORTGAGE': 'M12 3l9 9h-3v9H6v-9H3l9-9z',
  'REAL ESTATE': 'M3 12l9-9 9 9M5 10v10a2 2 0 002 2h10a2 2 0 002-2V10',
  'LEGISLATION': 'M12 3v18M3 9l9 6 9-6M3 15l9 6 9-6',
  'REGULATION': 'M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-2 1v5h5',
  'EXECUTIVE': 'M20 7H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2zM16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16',
  'NEWS': 'M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V9a2 2 0 012-2h2a2 2 0 012 2v9a2 2 0 01-2 2h-2z',
  'CANADA': 'M12 2C8 2 4 6 4 10c0 4 4 10 8 12 4-2 8-8 8-12 0-4-4-8-8-8z',
};
---

<nav class="w-64 flex-none bg-black/20 backdrop-blur-lg border-r border-white/5 flex flex-col hidden lg:flex">
  <div class="p-4 space-y-1 flex-1 overflow-y-auto scrollbar-thin">
    <div class="text-[10px] font-medium text-gray-500 mb-2 px-2 tracking-[0.2em] uppercase">Select Frequency</div>
    {CATEGORIES.map(cat => (
      <a
        href={cat.id === 'ALL' ? '/' : `/?category=${cat.id}`}
        data-category={cat.id}
        class:list={[
          'w-full flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 group relative overflow-hidden',
          activeCategory === cat.id
            ? 'bg-cyan-500/10 text-cyan-400 border border-cyan-500/30 shadow-[0_0_15px_rgba(6,182,212,0.1)]'
            : 'text-gray-400 hover:bg-white/5 hover:text-white border border-transparent'
        ]}
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d={iconPaths[cat.id] || iconPaths['ALL']} />
        </svg>
        <span class:list={['text-xs tracking-wider', activeCategory === cat.id ? 'font-bold' : 'font-medium']}>
          {cat.label}
        </span>
        {activeCategory === cat.id && <div class="absolute right-0 top-0 bottom-0 w-1 bg-cyan-500" />}
      </a>
    ))}
  </div>

  <!-- National Debt Widget (render only with real data) -->
  {formattedDebt && (
    <div class="p-4 border-t border-white/5 flex-none">
      <div class="bg-gradient-to-br from-red-900/20 to-black border border-red-500/30 p-3 rounded-lg">
        <div class="text-[10px] text-red-400 font-medium mb-1 uppercase tracking-widest">National Debt</div>
            <div class="text-lg text-white font-bold tabular-nums tracking-tighter" id="debt-display">
              {formattedDebt}
            </div>
      </div>
    </div>
  )}
</nav>
